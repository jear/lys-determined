name: detectron2_const
hyperparameters:
  global_batch_size: 16 # Detectron defaults to 16 regardless of N GPUs
  model_yaml: mask_rcnn_R_50_FPN_noaug_1x.yaml
  output_dir: None
  fake_data: False
searcher:
  name: single
  metric: bboxAP
  max_length: 
    batches: 90000
  smaller_is_better: false
resources:
    slots_per_trial: 1
entrypoint: model_def:DetectronTrial
min_validation_period:
  batches: 5000
#bind_mounts:
#  - host_path: /mnt/nfs
#    container_path: /mnt/nfs
#    read_only: true
environment:
  image: "katport/detectron2:cuda-10.1"
  environment_variables:
    - DETECTRON2_DATASETS=/mnt/nfs
  pod_spec:
    apiVersion: v1
    kind: Pod
    metadata:
      labels:
        customLabel: task-specific-label
    spec:
      containers:
      - name: determined-container
        volumeMounts:
        - name: nfs
          mountPath: "/mnt/nfs"
          readOnly: true
      volumes:
      - name: nfs
        persistentVolumeClaim:
          claimName: pvc-nfs-static

